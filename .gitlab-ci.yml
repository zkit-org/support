stages:
    - prepare
    - deploy

dependencies_boot:
    stage: prepare
    only:
        - main
    tags:
        - dev
    script:
        - cd boot-dependencies
        - mvn clean deploy -s ../settings.xml

dependencies_cloud:
    stage: prepare
    only:
        - main
    tags:
        - dev
    script:
        - cd cloud-dependencies
        - mvn clean deploy -s ../settings.xml

deploy_maven:
    stage: deploy
    only:
        - main
    tags:
        - dev
    script:
        - mvn install
        - mvn clean deploy -s settings.xml
